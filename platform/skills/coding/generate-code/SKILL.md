---
name: generate-code
display_name: "代码生成"
description: 根据设计文档生成代码，遵循项目规范和文件结构约定
layer: L1
metadata:
  emoji: "💻"
  tags: ["coding", "generate", "implementation"]
  applicable_roles: ["coding"]
---

# 代码生成

根据设计文档（API 设计、数据库设计等）生成符合项目规范的代码。

## 输入

用户会提供：
- `design`：设计文档内容（API 设计 / 数据库设计 / 功能描述）
- `tech_stack`（可选）：技术栈说明
- `conventions`（可选）：项目编码规范

## 工作流

### Step 1：分析设计文档

从设计文档中提取：
- 需要创建的文件列表
- 每个文件的职责和内容
- 文件间的依赖关系

### Step 2：搜索现有代码

使用 `search-codebase` skill 查找项目中的：
- 现有文件结构和命名规范
- 类似功能的实现方式（作为参考）
- 公共工具函数和基类

### Step 3：确定文件结构

根据项目规范规划文件结构：
- Model 层：数据模型定义
- Service 层：业务逻辑
- API 层：路由和请求处理
- Schema 层：数据校验

### Step 4：逐文件生成代码

按依赖顺序生成代码：
1. 先生成数据模型
2. 再生成业务逻辑
3. 然后生成 API 路由
4. 最后生成数据校验

每个文件需要：
- 正确的 import 语句
- 类型注解
- 必要的注释（仅在逻辑复杂处）
- 错误处理

### Step 5：质量自检

生成完成后检查：
- import 是否完整且正确
- 类型注解是否一致
- 接口是否与设计文档一致
- 是否有遗漏的功能点

## 输出格式

使用 `write` 工具将代码写入工作目录，同时输出摘要：

```markdown
## 代码生成报告

### 生成文件列表
| 文件 | 说明 | 行数 |
|------|------|------|
| {path} | {说明} | {lines} |

### 实现要点
- {要点1}
- {要点2}

### 待办事项
- [ ] {需要后续完善的事项}
```
