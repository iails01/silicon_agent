---
name: quality-signoff
description: 评估各阶段产出质量，决定是否通过或打回重做
metadata:
  emoji: "✅"
  tags: ["orchestrator", "quality", "signoff"]
---

# 质量签收评估

对流水线各阶段的产出进行质量评估，决定是否通过（pass）或打回（reject）。

## 输入

用户会提供：
- `stage`：当前阶段名称（spec / coding / test / review / smoke / doc）
- `output`：该阶段的产出内容
- `requirements`：原始需求描述
- `acceptance_criteria`：验收标准

## 工作流

### Step 1：完整性检查

对照需求和验收标准，检查产出是否覆盖所有要求的功能点。

### Step 2：质量评估

根据阶段类型执行不同的质量检查：

- **spec 阶段**：API 设计是否合理、数据模型是否完整、是否有遗漏场景
- **coding 阶段**：代码是否可运行、是否遵循规范、是否有明显 bug
- **test 阶段**：测试覆盖率是否充分、边界条件是否覆盖
- **review 阶段**：安全问题是否全部标记、代码质量问题是否合理
- **smoke 阶段**：冒烟测试是否覆盖核心路径
- **doc 阶段**：文档是否准确、是否与代码一致

### Step 3：评分与决策

给出综合评分（1-10），并决定：
- **通过（pass）**：评分 >= 7，产出满足要求
- **有条件通过（conditional_pass）**：评分 5-6，有小问题但不阻塞
- **打回（reject）**：评分 < 5，存在重大问题需要重做

## 输出格式

```markdown
## 质量签收报告

### 阶段：{stage}
### 评分：{score}/10
### 决策：{pass / conditional_pass / reject}

### 检查项

| 检查项 | 状态 | 说明 |
|--------|------|------|
| 功能完整性 | ✅/❌ | {说明} |
| 代码质量 | ✅/❌ | {说明} |
| 规范遵循 | ✅/❌ | {说明} |

### 问题列表
1. **[严重]** {问题描述} — 建议：{修复建议}
2. **[轻微]** {问题描述} — 建议：{修复建议}

### 签收意见
{总结性评价和后续建议}
```
