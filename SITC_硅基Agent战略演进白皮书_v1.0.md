# 硅基Agent数字码农战略演进白皮书 v1.0

> **SITC Trading Team · 研发组织战略升级**
> Starbucks China Innovation Technology Center · 2025
> **密级：内部机密 · 面向CTO/VP决策层**

---

## 目录

1. [执行摘要](#一执行摘要)
2. [战略背景：从SDD/BDD到硅基研发的必然演进](#二战略背景从sddbdd到硅基研发的必然演进)
3. [核心战略：硅基Agent集群替代PSP外包](#三核心战略硅基agent集群替代psp外包)
4. [组织变革蓝图：In-house角色的升维进化](#四组织变革蓝图in-house角色的升维进化)
5. [技术演进路径：SDD/BDD → Agent-Native研发](#五技术演进路径sddbdd--agent-native研发)
6. [风险控制与渐进策略](#六风险控制与渐进策略)
7. [实施路线图与里程碑](#七实施路线图与里程碑)
8. [决策建议](#八决策建议)

---

## 一、执行摘要

### 核心论点

SITC Trading Team 已通过 **SDD（Specification-Driven Development）** 和 **BDD（Behavior-Driven Development）** 实践，建立了 Contract-First 研发范式。这一范式的本质成果——结构化的接口契约、可执行的验证规范、标准化的任务规格——恰好构成了硅基Agent的"指令集"。

**我们提出的战略不是"用AI写代码"，而是"用AI重构整个研发组织"。**

核心路径：**SDD/BDD → Contract-First → 硅基Agent集群 → PSP外包逐步替代**

### 关键数字

| 指标 | 当前PSP模式 | Agent集群模式 | 变化 |
|------|-------------|---------------|------|
| 单任务交付周期 | 5-10天 | 1-2天 | **缩短 70%-80%** |
| In-house有效介入时间 | 2-3天 | ~75分钟 | **减少 95%** |
| 人效比 | 1 In-house : 1 PSP : 1模块 | 1 In-house + 7 Agent ≈ 3-5 PSP产能 | **提升 3-5倍** |
| 运营成本占比（vs PSP） | 100%（基准线） | < 15% | **节省 85%+** |
| 知识留存率 | 人走知识散 | Skills永久沉淀 | **从0到100%** |
| 质量一致性 | 依赖个人能力波动 | 规范驱动标准统一 | **质的飞跃** |

### 战略定位

```
┌─────────────────────────────────────────────────────────┐
│                  战略定位矩阵                             │
│                                                         │
│  ✗ 不是：给现有外包团队配一个AI编程助手                     │
│  ✗ 不是：用Copilot提升个人编码效率                         │
│  ✗ 不是：简单地用AI替换人头数                              │
│                                                         │
│  ✓ 而是：用硅基Agent集群重构研发组织的生产关系               │
│  ✓ 而是：让In-house员工从"生产者"升维为"决策者+监督者"      │
│  ✓ 而是：通过Skills体系实现知识资产化，彻底消除知识流失       │
│  ✓ 而是：将研发成本从"线性增长"转变为"边际递减"              │
└─────────────────────────────────────────────────────────┘
```

---

## 二、战略背景：从SDD/BDD到硅基研发的必然演进

### 2.1 SDD/BDD 实践奠定的基座

SITC Trading Team 在过去的实践中已建立了三大基础设施，这些基础设施的价值远超当初的设计预期——它们恰好构成了硅基Agent运行的"操作系统"。

**Contract-First：消灭了人与人之间的沟通歧义**

传统模式下，需求从PM到架构师到外包开发，每一次传递都产生信息衰减。Contract-First 将接口定义固化为 OpenAPI/AsyncAPI 契约文件，成为各方唯一的"真相来源"（Single Source of Truth）。

> **关键洞察：对人类而言，契约是减少歧义的工具；对Agent而言，契约就是精确的执行指令。**

**BDD：将业务场景变成可执行的验证规范**

BDD 实践将业务需求转化为 Given-When-Then 格式的可执行场景。这些场景不仅是测试用例，更是Agent理解业务意图的结构化输入。

**SDD：将开发规范变成可度量的标准**

规范驱动开发让代码质量标准从"约定俗成"变为"机器可检测"。Lint规则、代码规范、架构约束——这些已经以Skills的形式存在，可以直接注入Agent的上下文。

```
团队已有资产                    Agent视角的价值
─────────────                 ─────────────
OpenAPI 契约库        →       精确的接口实现指令
BDD 场景库            →       可执行的验证规范
代码规范文档          →       质量门控规则集
历史PR模式库          →       最佳实践参考模板
业务规则文档          →       领域知识 Skills
```

### 2.2 PSP外包模式的结构性瓶颈

当前 PSP（Professional Service Provider）外包模式存在四大结构性问题，这些问题不是通过"换一家更好的外包商"能解决的——它们是外包模式本身的固有缺陷。

**痛点一：沟通成本——研发链路中最大的隐性浪费**

| 沟通环节 | 典型耗时 | 频次/任务 | 单任务累计成本 |
|----------|----------|-----------|---------------|
| 需求对齐会议 | 1-2小时 | 1-3次 | 2-6小时 |
| 技术方案讨论 | 1-2小时 | 1-2次 | 1-4小时 |
| Code Review往返 | 30-60分钟 | 2-5次 | 1-5小时 |
| Bug修复沟通 | 30分钟 | 1-3次 | 0.5-1.5小时 |
| 时区/语言障碍开销 | 额外30% | — | 上述总和×0.3 |
| **单任务沟通总成本** | — | — | **6-22小时** |

> 一个5-10天交付的任务中，**30%-50%的时间消耗在沟通协调上**，而非实际编码。

**痛点二：知识流失——外包人员离场 = 知识清零**

```
外包人员在职期间                    外包人员离场后
─────────────────                 ─────────────────
✓ 理解业务上下文                   ✗ 业务知识随人离开
✓ 熟悉代码结构                     ✗ 代码理解归零
✓ 掌握边界Case处理经验              ✗ 经验无法传承
✓ 知晓技术债和历史决策              ✗ 历史背景完全丢失

结果：每次换人 = 重新培训 + 重新踩坑 + 重新积累
成本：新人达到前任80%生产力，平均需要 4-8 周
```

**痛点三：质量波动——依赖个人能力，无法标准化**

外包团队的代码质量高度依赖个体工程师的能力和态度。即使制定了代码规范，执行力度也因人而异。这导致了：
- 同一模块的代码风格不一致
- 安全漏洞发现率依赖Review者的经验
- 测试覆盖率从30%到90%不等
- 架构劣化在无声中累积

**痛点四：成本刚性——规模化成本线性增长，无边际递减**

```
PSP成本增长曲线（线性）          Agent成本增长曲线（对数）

成本 ↑                          成本 ↑
     │      ╱                        │    ╱───────────
     │    ╱                          │   ╱
     │  ╱                            │  ╱
     │╱                              │╱
     └──────→ 任务量                  └──────→ 任务量

每增加1个模块 = 加1个人头           每增加1个模块 = 加1份Skills配置
成本增量：人月单价（固定）          成本增量：Token增量（边际递减）
```

### 2.3 技术演进的逻辑链条

从SDD/BDD到硅基Agent集群，不是一次跳跃式变革，而是一条环环相扣的演进链条：

```
第一步：SDD → 规范化
  │  将开发过程中的隐性规则显性化、机器可读化
  │  成果：代码规范、架构约束、命名规则 → Agent的"行为准则"
  ↓
第二步：BDD → 场景化
  │  将业务需求转化为可执行的验证场景
  │  成果：Given-When-Then场景 → Agent的"验收标准"
  ↓
第三步：Contract-First → 契约化
  │  将接口定义固化为机器可读的契约文件
  │  成果：OpenAPI/AsyncAPI契约 → Agent输出的"质量门控"
  ↓
第四步：Agent集群 → 自动化
  │  将规范、场景、契约组合为Agent的完整"工作指南"
  │  成果：7角色Agent集群 → 自动化研发流水线
  ↓
第五步：Skills自进化 → 智能化
     Agent在执行中持续沉淀新知识，反哺Skills库
     成果：自我进化的研发体系 → 越用越强的"硅基研发团队"
```

**核心结论：SDD/BDD不是研发优化的终点，而是硅基研发的起跳板。** 我们已经完成了前三步，Agent集群只是这条路径上的自然延伸。

---

## 三、核心战略：硅基Agent集群替代PSP外包

### 3.1 替代模型：不是1:1替换，而是N:1降维

传统思维将"AI替代人"理解为1:1的简单替换——1个AI干1个人的活。这种理解严重低估了Agent集群的组织效率。

**PSP模式的生产关系：**

```
1个外包工程师 ≈ 1个功能模块的全栈能力
  │
  ├── 理解需求（沟通消耗 30%）
  ├── 设计方案（个人经验依赖）
  ├── 编写代码（核心产出时间 40%）
  ├── 编写测试（常被压缩或跳过）
  ├── 自测修复（质量依赖个人自觉）
  └── 对接Review（沟通消耗 15%）

有效编码时间占比：约 40%
```

**Agent模式的生产关系：**

```
1个In-house架构师 + 7个Agent角色
  │
  ├── In-house（75分钟/任务）
  │   ├── 创建规范化Issue（30min）
  │   ├── 审批技术方案（15min）
  │   ├── 确认Review结果（10min）
  │   └── 最终签收合并（20min）
  │
  └── Agent集群（全自动，24/7可用）
      ├── Orchestrator：任务分解（5min）
      ├── Spec Agent：方案生成（30min）
      ├── Coding Agent ×2-4：并行编码
      ├── Test Agent：自动测试 + 自修复驱动
      ├── Review Agent：三维审计（10min/PR）
      ├── Smoke Agent：端到端验证（15min）
      └── Doc Agent：知识沉淀（异步）

Agent有效执行时间占比：约 95%（无沟通损耗）
```

**核心公式：**

$$\boxed{1 \text{ In-house} + N \text{ Agents} > M \text{ PSP} \quad (N \leq 7, \; M = 3 \sim 5)}$$

| 对比维度 | 1 In-house + 7 Agents | 3-5个PSP工程师 |
|----------|----------------------|----------------|
| 并行处理能力 | 2-4个模块同时推进 | 3-5个模块分别推进 |
| 有效编码时间 | Agent 24h可用 | 每人8h×40%=3.2h/天 |
| 沟通开销 | ~0（契约驱动） | 30%-50%时间消耗 |
| 知识一致性 | Skills统一注入 | 每人理解不同 |
| 质量标准化 | Review Agent统一把控 | 依赖个人水平 |
| 扩展边际成本 | 增加Skills配置 | 增加人头 |

### 3.2 成本与ROI量化分析

> **本节为高管决策的核心参考依据。所有数据基于SITC实际运营场景估算，提供保守/中性/乐观三档区间。**

#### PSP外包年度成本模型

以一个典型的SITC Trading Team外包配置为基准：

| 成本项 | 单价 | 数量 | 月度成本 | 年度成本 |
|--------|------|------|----------|----------|
| 中级Java工程师 | ¥25,000/人月 | 5人 | ¥125,000 | ¥1,500,000 |
| 高级Java工程师 | ¥35,000/人月 | 2人 | ¥70,000 | ¥840,000 |
| 测试工程师 | ¥20,000/人月 | 2人 | ¥40,000 | ¥480,000 |
| 外包管理开销（PM/沟通/场地） | — | — | ¥30,000 | ¥360,000 |
| **PSP年度总成本** | — | **9人** | **¥265,000** | **¥3,180,000** |

#### Agent集群年度成本模型

| 成本项 | 单价 | 数量/用量 | 月度成本 | 年度成本 |
|--------|------|-----------|----------|----------|
| Claude/GPT API Token费用 | — | 约200万Token/天 | ¥15,000-25,000 | ¥180,000-300,000 |
| 基础设施（Docker沙箱/CI/CD） | — | 云资源 | ¥5,000-8,000 | ¥60,000-96,000 |
| In-house转型培训投入 | — | 一次性 | — | ¥50,000 |
| Skills维护与治理 | — | 知识管理员工时 | ¥5,000 | ¥60,000 |
| 工具链License（GitLab/Jira增量） | — | — | ¥3,000 | ¥36,000 |
| **Agent年度总成本** | — | — | **¥28,000-41,000** | **¥386,000-542,000** |

#### ROI对比分析

| 时间维度 | PSP模式累计成本 | Agent模式累计成本 | 累计节省 | 节省比例 |
|----------|----------------|-------------------|----------|----------|
| Year 1 | ¥3,180,000 | ¥542,000（保守） | ¥2,638,000 | **83%** |
| Year 2 | ¥6,360,000 | ¥928,000（Token成本下降） | ¥5,432,000 | **85%** |
| Year 3 | ¥9,540,000 | ¥1,264,000 | ¥8,276,000 | **87%** |

> **三年累计节省：¥826万（保守估算）**
> Token-vs-PSP 比率：**12%-17%**，达成 < 15% 的目标指标

#### 边际成本对比

```
扩展场景：新增1个业务模块的开发维护

PSP模式：
  + 1-2名外包工程师      → +¥25,000-70,000/月
  + 需求培训周期          → 4-8周才能达到80%生产力
  + 管理开销同比增加      → +¥5,000/月
  = 边际增量：¥30,000-75,000/月

Agent模式：
  + 新增领域Skills配置     → 一次性投入约¥5,000（知识提炼工时）
  + Token增量消耗          → +¥2,000-5,000/月
  + 无额外管理开销         → ¥0
  = 边际增量：¥2,000-5,000/月

边际成本比：Agent模式仅为PSP模式的 3%-17%
```

### 3.3 效率提升量化

#### 单任务交付周期对比

| 阶段 | PSP模式耗时 | Agent模式耗时 | 压缩率 |
|------|-------------|---------------|--------|
| 需求理解与对齐 | 1-2天 | 5分钟（Orchestrator自动解析） | **99%** |
| 技术方案设计 | 1-2天 | 30分钟（Spec Agent）+ 15分钟（审批） | **95%** |
| 编码实现 | 2-4天 | 2-6小时（Coding Agent并行） | **85%-93%** |
| 测试编写与执行 | 1-2天 | 与编码并行（Test Agent） | **100%**（无额外等待） |
| Code Review往返 | 1-2天 | 10分钟（Review Agent）+ 10分钟（确认） | **99%** |
| 集成验证 | 0.5-1天 | 15分钟（Smoke Agent） | **97%** |
| **总周期** | **5-10天** | **1-2天** | **70%-80%** |

#### In-house有效介入时间

```
传统外包模式下In-house员工的时间分配（每任务）：
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
需求对齐会议        ████████████  2-4小时
技术方案评审会       ██████████  2-3小时
Code Review         ████████  1-2小时
Bug沟通修复         ██████  1-2小时
最终验收            ████  0.5-1小时
杂项沟通协调         ████████  2-3小时
总计：约 2-3天（16-24小时）

Agent模式下In-house员工的时间分配（每任务）：
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
创建规范化Issue      ██████  30分钟
审批技术方案         ███  15分钟
确认Review BLOCKER   ██  10分钟
最终签收合并         ████  20分钟
总计：约 75分钟

时间释放：每任务释放 15-23 小时的In-house生产力
```

#### 并行产能

| In-house配置 | 可并行Coding Agent数 | 等效PSP产能 | 日产出模块数 |
|-------------|---------------------|-------------|-------------|
| 1人 | 2-3个（同模块） | 2-3人 | 1-2个 |
| 1人 | 4个（跨模块） | 4-5人 | 2-3个 |
| 2人 | 6-8个 | 8-10人 | 4-6个 |

#### 知识沉淀速率对比

| 维度 | PSP模式 | Agent模式 |
|------|---------|-----------|
| 知识载体 | 人的大脑 | Skills库（Git版本控制） |
| 知识传承 | 口头交接、文档（常缺失） | 自动沉淀、永久可用 |
| 知识更新 | 被动（出问题才补文档） | 主动（Doc Agent每次PR后自动提炼） |
| 知识覆盖 | 碎片化、依赖个人记录习惯 | 系统化、月增量≥5条有效Skill |
| 人员变动影响 | 知识断裂，4-8周恢复期 | 零影响，Skills即时可用 |

---

## 四、组织变革蓝图：In-house角色的升维进化

### 4.1 从"码农"到"指挥官"的角色跃迁

**当前状态：In-house员工是"高级码农"**

```
当前In-house工程师的日常：
  ├── 40% → 写功能性代码
  ├── 20% → 做Code Review（包括Review外包代码）
  ├── 15% → 写技术文档、接口文档
  ├── 15% → 与外包团队沟通对接
  └── 10% → 技术方案设计

核心身份：生产者（Producer）
价值度量：代码行数、功能交付数
```

**未来状态：In-house员工是"研发指挥官"**

```
未来In-house工程师的日常：
  ├── 30% → 设计任务规范、撰写高质量Issue（Input/Output/DoD）
  ├── 25% → 审批技术方案、把控架构方向
  ├── 20% → 监管Agent集群Dashboard、处理异常上报
  ├── 15% → 提炼和治理Skills库、沉淀领域知识
  └── 10% → 创新探索、技术预研、架构演进

核心身份：决策者 + 监督者（Decision Maker + Supervisor）
价值度量：方案质量、Skills资产积累、Agent集群效率
```

**核心转变：从"亲自下场打球"变为"坐在教练席指挥比赛"**

### 4.2 新型人才画像

Agent时代的In-house工程师需要四大核心能力：

| 能力域 | 具体要求 | 为什么重要 | 培养方式 |
|--------|----------|------------|----------|
| **需求结构化能力** | 将模糊需求转化为含 Input/Output/DoD 三要素的规范化Issue | Issue质量直接决定Orchestrator的任务分解准确率 | 模板训练+Workshop |
| **系统设计判断力** | 快速评估Spec Agent的技术方案是否合理、是否有架构风险 | 方案审批是Agent流水线中人类介入的核心环节 | Case Study+导师辅导 |
| **Agent调度管理能力** | 合理分配并行Agent数量，根据KPI数据调整Agent配置 | 并行管理4个Agent需要不同于管理4个人的技能 | 实战OJT |
| **知识工程能力** | 从Agent执行记录中提炼高价值Skills，治理Skills库 | Skills质量决定Agent集群的长期进化能力 | Retrospective实践 |

### 4.3 组织架构演进

#### Phase 1：过渡期（Month 1-2）—— In-house + PSP + 少量Agent

```
组织结构：
  In-house 架构师 ────┬──── PSP外包团队（全量保留）
                      │
                      └──── Agent集群（Review Agent + Test Agent）
                             └── Shadow Mode: 与PSP产出做对比验证

人员配比：In-house 3人 + PSP 9人 + Agent 2角色
新增成本：Agent运营 ~¥30,000/月
PSP节省：¥0（全量保留，对比验证阶段）
```

#### Phase 2：Agent主导期（Month 3-5）—— In-house + Agent集群，PSP逐步退出

```
组织结构：
  In-house 架构师 ────┬──── Agent集群（全7角色运行）
                      │     ├── Orchestrator
                      │     ├── Spec Agent
                      │     ├── Coding Agent ×2-4
                      │     ├── Test Agent
                      │     ├── Review Agent
                      │     ├── Smoke Agent
                      │     └── Doc Agent
                      │
                      └──── PSP外包团队（减配至2-3人）
                             └── 仅保留：高风险模块 + 保险阀角色

人员配比：In-house 3人 + PSP 2-3人 + Agent 7角色
PSP月度节省：¥135,000-195,000（减少6-7人）
Agent运营成本：~¥40,000/月
净节省：~¥95,000-155,000/月
```

#### Phase 3：目标态（Month 6+）—— 精简In-house + 全Agent集群

```
组织结构：
  In-house 精英团队 ──── Agent集群（全7角色 + Skills自进化）
                         ├── Orchestrator
                         ├── Spec Agent
                         ├── Coding Agent ×2-4
                         ├── Test Agent
                         ├── Review Agent
                         ├── Smoke Agent
                         └── Doc Agent

人员配比：In-house 2-3人 + PSP 0人 + Agent 7角色
PSP月度节省：¥265,000（全部退出）
Agent运营成本：~¥40,000/月
净节省：~¥225,000/月（年化 ¥2,700,000）
```

### 4.4 In-house团队规模预测

| 阶段 | In-house | PSP | Agent角色 | 等效总产能（PSP人天/月） |
|------|----------|-----|-----------|------------------------|
| 当前 | 3人 | 9人 | 0 | ~240人天 |
| Phase 1 | 3人 | 9人 | 2 | ~270人天（+12%） |
| Phase 2 | 3人 | 2-3人 | 7 | ~300人天（+25%） |
| Phase 3 | 2-3人 | 0人 | 7 | ~300-400人天（+25%-67%） |

**每人管理Agent上限和最优配比：**

| In-house角色 | 最优Agent配比 | 上限 | 说明 |
|-------------|--------------|------|------|
| 架构师 | 1人 : 全部7个Agent角色 | 1人管全集群 | 负责决策和签收 |
| 模块负责人 | 1人 : 2-3 Coding Agent + 1 Test Agent | 4个Agent | 负责模块级监管 |
| 质量负责人 | 1人 : Test Agent + Smoke Agent | 2个Agent | 负责质量把控 |
| 知识管理员 | 1人 : Doc Agent | 1个Agent | 可由架构师兼任 |

> **最优配置：2-3名In-house精英 + 7个Agent角色 = 替代原9人PSP团队的全部产能，并在质量和效率上实现超越。**

---

## 五、技术演进路径：SDD/BDD → Agent-Native研发

### 5.1 三层技术演进架构

```
╔══════════════════════════════════════════════════════════════╗
║                   Layer 3：Agent编排引擎                      ║
║  ┌────────────────────────────────────────────────────────┐  ║
║  │  Orchestrator → Spec → Coding → Test → Review → Smoke │  ║
║  │          7角色协同的自动化研发流水线                       │  ║
║  │  自动任务分解 · 并行调度 · 自修复循环 · 异常上报          │  ║
║  └────────────────────────────────────────────────────────┘  ║
╠══════════════════════════════════════════════════════════════╣
║                   Layer 2：Skills知识体系                     ║
║  ┌────────────────────────────────────────────────────────┐  ║
║  │  公共规范Skills · 领域业务Skills · 项目迭代Skills         │  ║
║  │  代码规范 · 安全规则 · 核销逻辑 · 权益金规则 · 平台适配   │  ║
║  │  Git版本控制 · 月度增量≥5条 · 自动提炼+人工审批          │  ║
║  └────────────────────────────────────────────────────────┘  ║
╠══════════════════════════════════════════════════════════════╣
║                   Layer 1：Contract-First基座                 ║
║  ┌────────────────────────────────────────────────────────┐  ║
║  │  OpenAPI 契约库 · AsyncAPI 事件契约 · 数据库Schema契约    │  ║
║  │  接口定义 = 唯一真相来源（Single Source of Truth）        │  ║
║  │  契约变更 = 需架构师审批 · 契约驱动测试 · 契约驱动文档    │  ║
║  └────────────────────────────────────────────────────────┘  ║
╚══════════════════════════════════════════════════════════════╝
```

**Layer 1：Contract-First基座**

这是整个硅基研发体系的"地基"。所有Agent的输入和输出都以契约为锚点：

- **OpenAPI契约库**：所有REST接口的定义，Spec Agent设计方案的约束边界，Coding Agent实现的唯一真相来源，Test Agent契约测试的生成依据
- **AsyncAPI事件契约**：异步消息的定义（如JD/Douyin回调事件）
- **数据库Schema契约**：表结构变更的版本化管理

**Layer 2：Skills知识体系**

Skills是Agent的"记忆"和"经验"，分三层组织：

| Skills层级 | 内容 | 维护者 | 更新频率 |
|------------|------|--------|----------|
| L1：公共规范 | 代码规范、安全编码、命名规则、Git规范 | DevOps/架构师 | 季度更新 |
| L2：领域业务 | 核销逻辑、权益金规则、搭售规则、平台适配 | 模块负责人 | 月度更新 |
| L3：项目迭代 | 当前Sprint的DoD、接口契约、技术决策记录 | 架构师 | 每Sprint更新 |

**Layer 3：Agent编排引擎**

7角色Agent的协同调度系统，包括：
- 任务DAG生成和执行
- Agent间通信协议（JSON格式的任务传递）
- 自修复循环控制（最多3轮）
- 异常检测和人工升级机制
- KPI数据采集和Dashboard推送

### 5.2 关键技术里程碑

| 里程碑 | 时间 | 核心目标 | 交付物 | Go/No-Go标准 |
|--------|------|----------|--------|--------------|
| **M1** | Month 1 | 契约库建立 + Review/Test Agent接入 | OpenAPI契约库≥覆盖80%接口；Review Agent覆盖100% PR | Review误报率<20%；Test覆盖率≥75% |
| **M2** | Month 2-3 | Orchestrator + Spec + Coding Agent闭环 | 完成首个端到端Agent研发循环 | 单任务Human-Touch<90min；FPR≥70% |
| **M3** | Month 4-5 | Smoke + Doc Agent + 全链路自动化 | 全7角色Agent运行；Skills库≥20条 | 核心链路Smoke通过率≥90%；Token-vs-PSP<20% |
| **M4** | Month 6+ | Skills自进化 + Agent自优化 | Skills月增量≥5条；Agent KPI持续达标 | Token-vs-PSP<15%；团队满意度≥80% |

### 5.3 与现有CI/CD的集成方案

**GitLab CI门控嵌入Agent流程：**

```
GitLab CI Pipeline（增强版）
━━━━━━━━━━━━━━━━━━━━━━━━━

Stage 1: Agent-Coding
  ├── Coding Agent 提交代码到 feature branch
  └── 自动触发 Pipeline

Stage 2: Agent-Test（并行）
  ├── Test Agent 运行单元测试
  ├── Test Agent 运行契约测试
  └── 失败 → 自修复循环（Agent内部，最多3轮）

Stage 3: Agent-Review
  ├── Review Agent 三维审计
  ├── BLOCKER → 阻断Pipeline，回传Coding Agent
  └── 通过 → 进入Smoke阶段

Stage 4: Agent-Smoke
  ├── Smoke Agent 端到端验证（Staging环境）
  ├── 失败 → 链路报告 + 通知Coding Agent
  └── 通过 → 等待In-house签收

Stage 5: Human-Approval（门控）
  ├── In-house架构师 Review 三份报告
  ├── 确认 → Merge to target branch
  └── 拒绝 → 反馈回Agent集群

Stage 6: Agent-Doc（异步）
  └── Doc Agent 自动生成变更日志 + 更新Wiki + 提交Skills PR
```

**Jira → Agent → GitLab 自动化链路：**

```
Jira Issue（#Agent-Task标注）
  │
  ├── Webhook触发 → Orchestrator Agent接收
  │
  ├── Orchestrator生成任务链 → 创建GitLab Issue/MR
  │
  ├── Spec Agent → 提交Draft MR（Implementation Plan）
  │   └── @架构师 审批
  │
  ├── Coding Agent → 在feature branch提交代码
  │   └── 触发GitLab CI Pipeline
  │
  ├── Pipeline完成 → 更新Jira Issue状态
  │
  └── Merge完成 → Jira Issue自动关闭
      └── Doc Agent更新关联文档
```

---

## 六、风险控制与渐进策略

### 6.1 风险矩阵

| 风险类别 | 具体风险 | 发生概率 | 影响程度 | 风险等级 | 缓解措施 |
|----------|----------|----------|----------|----------|----------|
| **技术风险** | Agent输出质量不稳定 | 中 | 高 | 🔴 高 | 自修复循环+KPI预警+人工兜底 |
| **技术风险** | 模型API服务中断 | 低 | 高 | 🟡 中 | 多模型备选方案+本地缓存 |
| **技术风险** | Token成本超出预期 | 中 | 中 | 🟡 中 | 月度成本监控+用量优化策略 |
| **技术风险** | 模型版本升级导致行为变化 | 中 | 中 | 🟡 中 | 版本锁定+升级前Staging验证 |
| **组织风险** | In-house员工抵触变革 | 中 | 高 | 🔴 高 | 渐进推行+培训赋能+角色升维叙事 |
| **组织风险** | 能力转型周期超预期 | 中 | 中 | 🟡 中 | 分阶段培训+导师辅导+实战OJT |
| **业务风险** | 过渡期交付中断 | 低 | 极高 | 🔴 高 | Shadow Mode+PSP保险阀+回退机制 |
| **业务风险** | PSP退出太快导致能力真空 | 中 | 高 | 🔴 高 | 严格Go/No-Go标准+保留保险阀 |
| **安全风险** | Agent越权操作 | 低 | 极高 | 🔴 高 | 权限最小化+沙箱隔离+行为监控 |
| **安全风险** | 敏感数据泄露 | 低 | 极高 | 🔴 高 | 数据脱敏+安全扫描+审计日志 |

### 6.2 渐进替代策略

> **核心原则：每一步都有可量化的Go/No-Go标准，每一步都有明确的回退路径。绝不冒进。**

#### 阶段0：Shadow Mode（Month 0-1）

```
目标：Agent与PSP并行运行，对比产出质量，积累数据

运行模式：
  ┌──────────────────────────────────────────┐
  │  同一个任务，分别交给PSP和Agent执行        │
  │  Agent产出不进入生产代码库                 │
  │  仅做双盲对比，收集数据                    │
  └──────────────────────────────────────────┘

对比指标：
  ├── 交付时间：PSP vs Agent
  ├── 代码质量：静态分析得分、Bug密度
  ├── 测试覆盖：覆盖率、边界Case命中率
  ├── 契约对齐：与OpenAPI偏差率
  └── 人工返修：需要人工干预的比例

Go/No-Go标准：
  ✅ Go：Agent在≥80%的对比任务中质量≥PSP
  ✗ No-Go：Agent质量显著低于PSP → 优化Skills后重跑Shadow
```

#### 阶段1：低风险模块PSP退出（Month 2-3）

```
目标：在低风险模块上让Agent正式接管，PSP从这些模块退出

适用模块选择标准：
  ├── 业务逻辑清晰，边界明确
  ├── 有完善的Contract Test覆盖
  ├── 历史Bug密度低
  └── 非核心支付/资金链路

推荐首批退出模块：
  ├── 第三方平台适配层（JD/Douyin状态同步）
  ├── 营销活动配置模块
  └── 非核心查询接口

PSP调整：
  ├── 低风险模块PSP人员减配（-3人）
  ├── 保留的PSP人员聚焦高风险核心模块
  └── 减配人员提前1个月通知

Go/No-Go标准：
  ✅ Go：接管模块FPR≥75%，无P0/P1生产事故
  ✗ No-Go：FPR<60%或出现生产事故 → 暂停替代，PSP回补
```

#### 阶段2：核心模块PSP减配（Month 4-5）

```
目标：Agent主导核心业务模块开发，PSP进一步退出

适用模块：
  ├── 核销逻辑模块
  ├── 权益金计算模块
  └── 支付回调处理模块

前置条件：
  ├── 阶段1稳定运行≥4周
  ├── 核心模块Skills库已建立
  ├── Smoke Agent端到端验证通过率≥90%
  └── In-house员工Agent调度能力培训完成

PSP调整：
  ├── 核心模块PSP减配至1-2人（保险阀角色）
  ├── 保留人员转为"应急支持"而非"日常开发"
  └── Agent处理常规开发，PSP仅处理极端场景

Go/No-Go标准：
  ✅ Go：全模块FPR≥80%，Token-vs-PSP<20%，无P0事故
  ✗ No-Go：KPI连续2周低于预警线 → 暂停减配，评估根因
```

#### 阶段3：PSP全面退出（Month 6+）

```
目标：Agent集群全面运营，PSP完全退出

前置条件（必须全部满足）：
  ├── 阶段2稳定运行≥4周
  ├── Token-vs-PSP < 15%
  ├── 所有Agent角色KPI持续达标
  ├── In-house团队完成全部角色转型
  ├── Skills库≥30条有效Skill
  └── 无未解决的安全事件

PSP退出安排：
  ├── 提前2个月通知PSP供应商
  ├── 完成知识交接（PSP→Skills库迁移）
  ├── PSP人员最后1个月做Skills验证和补充
  └── 正式退出后保留1个月的按需咨询合同（应急）

Go/No-Go标准：
  ✅ Go：连续4周全部KPI达标，无人工升级事件
  ✗ No-Go：任何维度出现系统性退化 → 回退到阶段2
```

### 6.3 止损机制设计

```
三级止损机制
━━━━━━━━━━━━

Level 1：自动预警（Agent自处理）
  触发条件：单个Agent KPI跌破预警线
  自动动作：优化Prompt → 增加Skills → 重新执行
  通知对象：Dashboard告警 + Slack通知模块负责人
  时间窗口：24小时内自动修复

Level 2：人工干预（In-house接管）
  触发条件：Agent KPI连续2周低于预警线
  自动动作：暂停该Agent的自动执行权限
  人工动作：In-house接管该模块任务，分析根因
  决策选项：
    a) Skills优化后重新上线Agent
    b) 切换Agent模型版本
    c) 临时启用PSP回补（保险阀）
  时间窗口：48小时内决策

Level 3：紧急熔断（全面回退）
  触发条件：
    - 任何安全事件（Agent越权/数据泄露）
    - P0级生产事故且与Agent产出相关
    - 多个Agent同时KPI系统性崩溃
  自动动作：
    - 立即冻结所有Agent写权限
    - 通知全部In-house员工
    - 启动应急PSP合同条款
  人工动作：
    - 架构师+DevOps联合根因分析
    - 安全团队介入（如涉及安全事件）
    - 制定恢复方案后逐步重新启用
  时间窗口：立即执行，4小时内出根因分析
```

**保险阀机制：**

> 在Phase 3验证通过之前，始终保留1-2个PSP作为"保险阀"。这些PSP人员的角色不是日常开发，而是：
> - 参与极端边界Case的处理
> - 在Agent集群出现系统性问题时快速接管
> - 协助将PSP团队的隐性知识迁移到Skills库
>
> 保险阀退出条件：Agent集群连续运行8周无Level 2以上止损事件。

### 6.4 合规与治理保障

| 治理维度 | 具体措施 | 执行频率 |
|----------|----------|----------|
| **操作审计** | Agent所有操作写入审计日志（操作人/时间/内容/结果） | 实时 |
| **权限管控** | 最小权限原则：Agent仅有feature branch的push权限，禁止操作main/release | 持续 |
| **沙箱隔离** | 每个Agent在独立Docker沙箱中运行，无法访问生产环境数据 | 持续 |
| **数据安全** | Gitleaks扫描确保无PII/密钥泄露；敏感数据脱敏处理 | 每次PR |
| **依赖合规** | Check-Dependency验证，禁止引入未审批的第三方依赖 | 每次PR |
| **安全评估** | 季度安全评估，覆盖Agent行为分析、权限使用审计、漏洞扫描 | 每季度 |
| **合规报告** | 生成Agent运营合规报告，提交信息安全委员会 | 每季度 |

---

## 七、实施路线图与里程碑

### 7.1 六个月实施甘特图

```
Month 1        Month 2        Month 3        Month 4        Month 5        Month 6
┬──────────┬──────────┬──────────┬──────────┬──────────┬──────────┐
│          │          │          │          │          │          │
│ ■ Agent接入维度 ──────────────────────────────────────────────── │
│ ████████████████                                               │ Review+Test Agent接入
│          ██████████████████████                                 │ Orchestrator+Spec+Coding接入
│          │          │          ██████████████████████           │ Smoke+Doc Agent接入
│          │          │          │          │  ████████████████   │ Skills自进化启动
│          │          │          │          │          │          │
│ ■ PSP退出维度 ────────────────────────────────────────────────── │
│ ░░░░░░░░░░░░░░░░                                               │ Shadow Mode（对比验证）
│          │  ████████████████████                                │ 低风险模块PSP退出（-3人）
│          │          │  ████████████████████                     │ 核心模块PSP减配（-4人）
│          │          │          │          ██████████████████    │ PSP全面退出（保险阀验证）
│          │          │          │          │          │          │
│ ■ 能力建设维度 ──────────────────────────────────────────────── │
│ ████████████████                                               │ 任务规格化培训
│          ████████████████                                      │ 契约设计培训
│          │          ████████████████                            │ Agent调度培训
│          │          │          ████████████████                 │ Skills提炼培训
│          │          │          │          ████████████████      │ 集群诊断培训
│          │          │          │          │          │          │
│ ■ 基础设施维度 ──────────────────────────────────────────────── │
│ ████████████████                                               │ 契约库建设+CI/CD集成
│          ████████████████                                      │ Skills仓库+Jira集成
│          │          ████████████████                            │ Mock Server+Smoke基础设施
│          │          │          ████████████████                 │ Dashboard+监控体系
│          │          │          │          │          │          │
├──────────┼──────────┼──────────┼──────────┼──────────┼──────────┤
│   M1     │   M2     │   M2     │   M3     │   M3     │   M4    │
│ 里程碑   │ 里程碑    │ 里程碑   │ 里程碑    │ 里程碑   │ 里程碑  │
└──────────┴──────────┴──────────┴──────────┴──────────┴──────────┘
```

### 7.2 里程碑Go/No-Go决策标准

| 里程碑 | 时间点 | Go标准（全部满足） | No-Go处置 |
|--------|--------|-------------------|-----------|
| **M1：基础验证** | Month 1末 | Review Agent误报率<20%；Test覆盖率≥75%；契约库覆盖≥80%接口 | 延长Shadow期，优化Skills配置 |
| **M2：首次闭环** | Month 3末 | 首个端到端任务Human-Touch<90min；FPR≥70%；PSP对比数据优势明确 | 缩小Agent范围，聚焦单模块验证 |
| **M3：全链路运行** | Month 5末 | 全7角色KPI达标；核心链路Smoke≥90%；Token-vs-PSP<20% | 暂缓PSP退出，Agent运行但不替代 |
| **M4：稳态运营** | Month 6末 | Token-vs-PSP<15%；连续4周无Level 2止损；团队满意度≥80%；Skills≥30条 | 保留保险阀PSP，继续优化Agent |

### 7.3 成本节省月度累积曲线

```
累计节省（万元）
  ↑
28│                                                    ╱── ¥280,000
  │                                                  ╱
24│                                               ╱╱
  │                                            ╱╱
20│                                         ╱╱
  │                                      ╱╱     ← Phase 3：PSP全面退出
16│                                   ╱╱           月净节省 ¥225,000
  │                                ╱╱
12│                            ╱╱╱
  │                        ╱╱╱         ← Phase 2：核心模块减配
 8│                    ╱╱╱                月净节省 ¥95,000-155,000
  │               ╱╱╱╱
 4│          ╱╱╱╱╱              ← Phase 1：低风险模块退出
  │     ╱╱╱╱                       月净节省 ¥65,000-105,000
 0│────                        ← Phase 0：Shadow Mode（净投入期）
  │ -3 ← Agent基础设施建设投入
-4│
  └────┬────┬────┬────┬────┬────┬── 月份
       M1   M2   M3   M4   M5   M6

预计回本时间点：Month 2-3（累计节省覆盖初期投入）
6个月累计净节省：¥180万-280万（保守-乐观区间）
```

---

## 八、决策建议

### 三个战略选项

#### 选项A：保守方案——"观察试点"

```
策略：仅部署Review Agent + Test Agent作为辅助工具
PSP政策：全量保留，不做任何减配
投入：~¥30,000/月
预期收益：Review效率提升，测试覆盖率改善
PSP节省：¥0
适用条件：对AI Agent成熟度存疑，希望先积累内部经验
风险等级：极低
局限：无法验证Agent替代PSP的核心假设，错失先发优势
```

#### 选项B：稳健方案——"渐进替代"（推荐）

```
策略：按4阶段（Shadow → 低风险退出 → 核心减配 → 全面退出）
      严格执行Go/No-Go标准，每步可回退
PSP政策：6个月内从9人逐步减至0人，始终保留保险阀
投入：初期¥40,000/月 → 稳态¥40,000/月
预期收益：
  - 6个月累计节省 ¥180万-280万
  - 交付效率提升 3-5倍
  - 知识资产永久沉淀
PSP节省：年化 ¥270万
适用条件：认可Agent技术方向，愿意投入组织变革
风险等级：中（每步有止损机制）
```

#### 选项C：激进方案——"快速替代"

```
策略：压缩Shadow期至2周，3个月内完成PSP全面退出
PSP政策：Month 1减配50%，Month 3全面退出
投入：¥50,000/月（加速投入培训和基础设施）
预期收益：更早实现成本节省，3个月内开始回报
PSP节省：更快但风险更高
适用条件：业务压力要求快速降本，且对Agent技术高度自信
风险等级：高（压缩了验证周期，回退余地小）
局限：In-house培训周期可能跟不上，过渡期交付风险显著
```

### 推荐方案

**强烈建议选择选项B——稳健方案。**

理由：
1. **风险可控**：每个阶段都有明确的Go/No-Go标准和回退机制
2. **ROI确定性高**：即使在保守估算下，6个月累计节省也超过¥180万
3. **组织可承受**：给In-house团队充分的能力转型时间
4. **可验证性强**：Shadow Mode提供了有说服力的数据支撑后续决策
5. **与v1.0设计方案完全对齐**：复用已有的7角色设计、KPI体系和三阶段路径

### 下一步行动清单

> 以下事项需要CTO/VP级别的批准和支持：

| # | 行动事项 | 需要决策/批准 | 建议时间 |
|---|----------|--------------|----------|
| 1 | **批准战略方案**：确认选择"稳健方案"作为实施路径 | CTO批准 | 本周内 |
| 2 | **预算审批**：批准Agent基础设施和运营预算（首年约¥54万） | VP Finance审批 | 2周内 |
| 3 | **PSP合同调整授权**：授权与PSP供应商协商分阶段减配条款 | VP/采购部门审批 | 2周内 |
| 4 | **组织变革沟通**：向In-house团队正式传达角色升维战略，启动培训计划 | CTO/TL联合沟通 | 批准后1周内 |
| 5 | **成立Agent运营小组**：指定1名架构师牵头Phase 0 Shadow Mode | TL指定 | 批准后立即 |
| 6 | **确认MVP选点**：确认JD平台适配层作为首批Agent接管模块 | 架构师+模块负责人确认 | 批准后1周内 |
| 7 | **建立月度Review机制**：每月向高管层汇报Agent集群运营KPI和PSP退出进展 | CTO确认汇报机制 | Phase 0启动时 |

---

## 附录：关键术语对照表

| 术语 | 全称 | 含义 |
|------|------|------|
| SDD | Specification-Driven Development | 规范驱动开发 |
| BDD | Behavior-Driven Development | 行为驱动开发 |
| PSP | Professional Service Provider | 专业服务外包供应商 |
| FPR | First Pass Rate | 首次通过率（代码一次性通过测试+Review的比例） |
| Skills | Agent Knowledge Units | Agent知识单元（结构化的领域知识配置包） |
| Token-vs-PSP | Token Cost vs PSP Cost | Agent Token费用与同等PSP服务费的比率 |
| Human-Touch | Human Intervention Time | In-house员工单任务有效介入时长 |
| Shadow Mode | Parallel Verification Mode | 影子模式（Agent与PSP并行运行对比验证） |
| DAG | Directed Acyclic Graph | 有向无环图（任务依赖关系图） |
| DoD | Definition of Done | 完成定义（任务验收标准） |
| Contract-First | Contract-First Development | 契约先行开发（先定义接口契约，再实现代码） |

---

> **文档版本**：v1.0
> **编制团队**：SITC Trading Team
> **面向对象**：CTO/VP决策层
> **密级**：内部机密
> **下一步**：待高管批准后，启动Phase 0 Shadow Mode
> **关联文档**：《数字员工集群完整设计方案 v1.0》
